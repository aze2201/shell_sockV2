<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="966" height="827"><desc>IoT%20-%3E%20Proxy%3A%20IoT%20device%20start%20connection%20to%20Signalling%20server%20(default%3A%2022443)%5Cn%20via%20TLS%20(openssl%20connect)%0A%0AProxy--%3EProxy%3A%20Proxy%20Linux%20wait%20until%5Cn%20UNIX%20sock%20file%20apprear%20on%20tmp%20dir.%0A%0AProxy%20%3C-%20Admin%3A%20Admin%20create%20UNIX%20sock%20file%20%2Ftmp%20dir%0A%0AProxy--%3EProxy%3A%20Proxy%20find%20SOCK%20file%20and%20store%20it%20in%20sock.db%0A%0AProxy--%3EProxy%3A%20Proxy%20generate%20SessionID%20and%5Cn%20map%20to%20SOCK%20file%20in%20map.table%0A%0AProxy%20-%3EIoT%3A%20Proxy%20sends%20SessionID%20to%20IoT%20%0A%0AIoT--%3EIoT%3A%20IoT%20accept%20SessionID%20and%5Cn%20initialte%20%2Fbin%2Fbash%20to%20Media%20Port%20connection%20(default%3A%202222)%0A%0AIoT-%3EProxy%3A%20IoT%20connects%20to%20Proxy%20Media%20port%20via%20SSL%20and%20send%20SessionID%20and%20%2Fbin%2Fbash%20PTY%0A%0AProxy--%3EProxy%3A%20Proxy%20find%20SOCK%20file%20via%20SesionID%20and%5Cn%20initate%20UNIX%20connection%0A%0AAdmin%20%3C-%3EIoT%3A%20Admin%20and%20Proxy%20start%20client%20%2Fbin%2Fbash%0A%0Anote%20over%20Admin%2CIoT%3A%20Connection%20with%20TLS%20protocol%20via%20OPENSSL%20connect.</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="966" height="827"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 36.48185051419141 55.049635120999994 L 36.48185051419141 827.7047512109999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 609.7200049522122 55.049635120999994 L 609.7200049522122 827.7047512109999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 919.9612431473945 55.049635120999994 L 919.9612431473945 827.7047512109999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.167601650000002 10.944586211000003 L 64.79609937838282 10.944586211000003 L 64.79609937838282 55.049635120999994 L 8.167601650000002 55.049635120999994 L 8.167601650000002 10.944586211000003 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="25.8912972305" y="38.71443182099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">IoT</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 573.2597447354817 10.944586211000003 L 646.1802651689427 10.944586211000003 L 646.1802651689427 55.049635120999994 L 573.2597447354817 55.049635120999994 L 573.2597447354817 10.944586211000003 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="590.9834403159817" y="38.71443182099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Proxy</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 881.4608904624023 10.944586211000003 L 958.4615958323867 10.944586211000003 L 958.4615958323867 55.049635120999994 L 881.4608904624023 55.049635120999994 L 881.4608904624023 10.944586211000003 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="899.1845860429023" y="38.71443182099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Admin</text></g></g><g><g><g><rect fill="white" stroke="none" x="115.2964144501159" y="87.720041721" width="415.60902656617185" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="115.2964144501159" y="104.055245021" width="178.4581018835547" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="117.7466949451159" y="102.42172469100001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">IoT device start connection to Signalling server (default: 22443)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="117.7466949451159" y="118.75692799100001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> via TLS (openssl connect)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 36.48185051419141 125.291009311 L 596.2706875685456 125.291009311" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(609.7200049522122,125.291009311) translate(-609.7200049522122,-125.291009311)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 596.1073355355455 118.48467460266666 L 609.7200049522122 125.291009311 L 596.1073355355455 132.09734401933332 Z"/></g></g><g><g><rect fill="white" stroke="none" x="629.0499955238789" y="149.793814261" width="142.6027094275" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="629.0499955238789" y="166.12901756099998" width="228.15028633179688" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="631.5002760188789" y="164.49549723099997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Proxy Linux wait until</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="631.5002760188789" y="180.83070053099996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> UNIX sock file apprear on tmp dir.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 609.7200049522122 187.364781851 L 675.0608181522122 187.364781851 L 675.0608181522122 208.600546141 L 623.1693223358789 208.600546141" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(609.7200049522122,208.600546141) translate(-609.7200049522122,-208.600546141)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 623.3326743688789 201.79421143266666 L 609.7200049522122 208.600546141 L 623.3326743688789 215.40688084933333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="644.6666954835143" y="233.103351091" width="240.34785713257813" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="647.1169759785143" y="247.805034061" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Admin create UNIX sock file /tmp dir</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 919.9612431473945 254.339115381 L 623.1693223358789 254.339115381" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(609.7200049522122,254.339115381) translate(-609.7200049522122,-254.339115381)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 623.3326743688789 247.53278067266666 L 609.7200049522122 254.339115381 L 623.3326743688789 261.14545008933334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="629.0499955238789" y="278.84192033100004" width="285.1939264685156" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="631.5002760188789" y="293.543603301" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Proxy find SOCK file and store it in sock.db</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 609.7200049522122 300.077684621 L 675.0608181522122 300.077684621 L 675.0608181522122 321.313448911 L 623.1693223358789 321.313448911" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(609.7200049522122,321.313448911) translate(-609.7200049522122,-321.313448911)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 623.3326743688789 314.5071142026667 L 609.7200049522122 321.313448911 L 623.3326743688789 328.11978361933336 Z"/></g></g><g><g><rect fill="white" stroke="none" x="629.0499955238789" y="345.81625386100006" width="203.74084724488281" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="629.0499955238789" y="362.15145716100005" width="206.16035713257813" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="631.5002760188789" y="360.51793683100004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Proxy generate SessionID and</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="631.5002760188789" y="376.85314013100003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> map to SOCK file in map.table</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 609.7200049522122 383.387221451 L 675.0608181522122 383.387221451 L 675.0608181522122 404.62298574100004 L 623.1693223358789 404.62298574100004" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(609.7200049522122,404.62298574100004) translate(-609.7200049522122,-404.62298574100004)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 623.3326743688789 397.8166510326667 L 609.7200049522122 404.62298574100004 L 623.3326743688789 411.4293204493334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="222.06084926456904" y="429.125790691" width="202.08015693726563" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="224.51112975956903" y="443.827473661" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Proxy sends SessionID to IoT </text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 609.7200049522122 450.36155498100004 L 49.931167897858074 450.36155498100004" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(36.48185051419141,450.36155498100004) translate(-36.48185051419141,-450.36155498100004)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 50.09451993085808 443.5552202726667 L 36.48185051419141 450.36155498100004 L 50.09451993085808 457.1678896893334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="55.81184108585808" y="474.86435993099997" width="172.76736702027344" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="55.81184108585808" y="491.19956323099996" width="383.0320917517187" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="58.26212158085808" y="489.56604290099995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">IoT accept SessionID and</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="58.26212158085808" y="505.90124620099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> initialte /bin/bash to Media Port connection (default: 2222)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 36.48185051419141 512.435327521 L 101.8226637141914 512.435327521 L 101.8226637141914 533.671091811 L 49.931167897858074 533.671091811" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(36.48185051419141,533.671091811) translate(-36.48185051419141,-533.671091811)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 50.09451993085808 526.8647571026667 L 36.48185051419141 533.671091811 L 50.09451993085808 540.4774265193333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="55.81184108585809" y="558.1738967609999" width="534.5781732946875" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="58.26212158085809" y="572.8755797309999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">IoT connects to Proxy Media port via SSL and send SessionID and /bin/bash PTY</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 36.48185051419141 579.409661051 L 596.2706875685456 579.409661051" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(609.7200049522122,579.409661051) translate(-609.7200049522122,-579.409661051)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 596.1073355355455 572.6033263426666 L 609.7200049522122 579.409661051 L 596.1073355355455 586.2159957593333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="629.0499955238789" y="603.9124660009999" width="253.41871894898438" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="629.0499955238789" y="620.2476693009999" width="162.17323555054688" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="631.5002760188789" y="618.6141489709998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Proxy find SOCK file via SesionID and</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="631.5002760188789" y="634.9493522709998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> initate UNIX connection</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 609.7200049522122 641.4834335909999 L 675.0608181522122 641.4834335909999 L 675.0608181522122 662.7191978809999 L 623.1693223358789 662.7191978809999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(609.7200049522122,662.7191978809999) translate(-609.7200049522122,-662.7191978809999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 623.3326743688789 655.9128631726666 L 609.7200049522122 662.7191978809999 L 623.3326743688789 669.5255325893332 Z"/></g></g><g><g><rect fill="white" stroke="none" x="352.7290910428242" y="687.2220028309998" width="250.9849115759375" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="355.17937153782424" y="701.9236858009998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Admin and Proxy start client /bin/bash</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 906.5119257637278 708.4577671209998 L 49.931167897858074 708.4577671209998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(36.48185051419141,708.4577671209998) translate(-36.48185051419141,-708.4577671209998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 50.09451993085808 701.6514324126665 L 36.48185051419141 708.4577671209998 L 50.09451993085808 715.2641018293332 Z"/><g transform="translate(919.9612431473945,708.4577671209998) translate(-919.9612431473945,-708.4577671209998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 906.3485737307278 701.6514324126665 L 919.9612431473945 708.4577671209998 L 906.3485737307278 715.2641018293332 Z"/></g></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 21.780167544191407 732.9605720709999 L 919.9612431473945 732.9605720709999 L 934.6629261173945 747.6622550409999 L 934.6629261173945 770.5315396609999 L 21.780167544191407 770.5315396609999 L 21.780167544191407 732.9605720709999 M 919.9612431473945 732.9605720709999 L 919.9612431473945 747.6622550409999 L 934.6629261173945 747.6622550409999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="304.65683430637887" y="755.8298566909999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Connection with TLS protocol via OPENSSL connect.</text></g></g><g/><g/><g/></g></svg>